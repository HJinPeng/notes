# HTTP

## HTTP/1.1

以**文本**的形式在客户端和服务端之间传输。是对底层 `TCP/IP` 协议的封装。

## HTTP/2

以**二进制**进行传输的。是从 `SPDY` 协议发展出来的。

## 传输模式对比

- HTTP/1.0 中，客户端需要中断当前连接，然后重新建立新的连接去请求资源。  

- HTTP/1.1 中，引入了**持久连接**和**管道**的概念，底层的TCP连接默认是open的，客户端可以使用同一个连接去进行交互。  
但请求还是一一响应的，有顺序的，前面的请求被阻塞，后面的也得不到响应（**队头阻塞问题**）。  
可以通过建立多个连接解决这个问题，但是耗资源且连接数有限。

- HTTP/2 中，二进制传输，将原始请求分成更小的信息包。只需要**一个连接**即可解决 HTTP/1.1 需要多连接处理并行的问题。  
在这个连接中传输多个数据流，每个数据流中包含多个message包，每个message又被切分成多个frame。  
这些frame可以在传输期间交换位置，在接收方重组，交错的请求和响应可以并行运行，解决了 HTTP/1.1 的队头阻塞问题。

## HTTP/2 的特点

### 多路复用

HTTP/1.1 每次只能处理一个请求，容易导致队头阻塞，HTTP/2 引入了多路复用（Multiplexing），可以在同一个连接上并发处理多个请求和响应，有效减少头部开销和延迟，显著提高了网页加载速度，减少了用户等待时间。

### 服务器主动推送

HTTP/2 允许服务器主动推送与用户请求相关的资源，无需客户端明确请求。这可以加速页面加载，减少了浏览器请求的往返次数。

### 二进制分帧

HTTP/2 使用二进制格式传输数据帧，代替了 HTTP/1.1 的文本格式，进一步提高了传输效率。

### 优先级和依赖

在客户端向服务器端发送消息的时候，消息会以流的形式在连接中传输，这些流可以分配1到256之间的权重来确定其请求的响应的优先级。数字越大表示优先级越高。   

除此之外，客户端还通过指定它所依赖的流的ID来说明每个流对另一个流的依赖关系。如果省略父标识符，则认为该流依赖于根流。

### 头部压缩

HTTP1.1中，通常使用 `gzip` 对 HTTP 中的消息进行压缩，主要是针对CSS文件和javascript文件，但是 HTTP 的消息头还是由纯文本来发送的

HTTP/2中，使用的算法是 `HPACK` 算法，同时可以对 HTTP 的消息头和数据分别进行压缩，从而大大减少其大小
