# 进程 & 线程

程序创建一块内存空间，用来存放代码，运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境称为进程。  

线程是不能单独存在的，它由进程来启动和管理的。  

1. 进程中的任一线程出错，都会导致整个进程的奔溃。（有些语言对此做了调整，如指针异常抛出，不会导致整个进程奔溃）
2. 线程之间共享进程中的数据
3. 当一个进程关闭后，操作系统会回收这个进程占用的内存
4. 进程之间的内容相互隔离

## 目前多进程浏览器的架构

1. 浏览器主进程：负责界面显示，用户交互，管理子线程，提供存储
2. 渲染进程：将HTML,CSS,JS转为用户可以交互的网页。默认情况下谷歌浏览器会给每一个tab页创建一个渲染进程，出于安全考虑，渲染进程都在沙箱下运行
3. 插件进程：运行插件，插件容易奔溃，防止影响其他进程
4. GPU进程：渲染3D效果，现在谷歌浏览器也用来渲染UI页面
5. 网络进程：处理网络资源加载

![多进程浏览器架构](/assets/img/browser/process-thread.png)

## 打开一个页面，有什么进程

1. 浏览器主进程
2. 渲染进程
3. 备用渲染进程
4. GPU进程
5. 网络进程
6. Storage进程

**如果此时再打开一个页面，进程有什么变化？**

- 从已有页面打开同一站点页面，无变化
- 其他，多一个渲染进程

![页面进程](/assets/img/browser/process-thread-2.png)